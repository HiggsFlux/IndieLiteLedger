const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LicenseTab-xpliP0X3.js","assets/index-jt3wcBYW.js","assets/index-eI9ToFWs.css"])))=>i.map(i=>d[i]);
import{d as ie,L as ue,M as de,r as v,N as ce,b as c,o as n,O as re,f as t,P as me,c as _,w as l,G as y,e as a,Q as _e,g as u,t as o,R as pe,S as fe,E as ve,_ as ye,U as be,V as xe,W as b,X as w,Y as he,Z as ge,J as we,a0 as ke,a1 as Ee,y as Ve,a2 as De,a3 as Ce,p as Te,a4 as Ue,a5 as Ie,a6 as Me,q as ze,a7 as Pe,a8 as Ye,a9 as Fe,I as Le,aa as Re,h as Se,ab as je,ac as Be,ad as L,ae as Oe}from"./index-jt3wcBYW.js";import{f as Ne,a as We,c as Ae}from"./client-23pOLq59.js";import{_ as He}from"./ClientOperateDialog.vue_vue_type_script_setup_true_lang-DWCEccc_.js";const $e={class:"h-full flex gap-4 p-4 overflow-hidden"},Ge={key:0},qe={class:"flex items-start justify-between mb-4"},Je={class:"flex items-center gap-3 flex-1 min-w-0 mr-2"},Qe={class:"min-w-0 flex-1"},Xe=["title"],Ze={class:"flex flex-wrap gap-2 mt-2"},Ke={class:"flex items-center gap-1"},et=["href"],tt={key:1},lt={key:0,class:"flex items-center gap-1"},at={key:1},st={key:0,class:"mb-4"},nt={class:"flex flex-wrap gap-2"},ot={class:"flex items-center gap-1 font-bold text-gray-600"},it={class:"text-xs text-gray-600 space-y-1"},ut={class:"mt-6 pt-4 border-t border-gray-100 text-xs text-gray-400"},dt={class:"p-4 bg-gray-50 rounded mb-4 flex-none"},ct={class:"flex items-center gap-1"},rt={class:"flex justify-end"},mt={class:"flex-1 overflow-y-auto pr-2 pl-4"},_t={class:"flex justify-between items-center"},pt={class:"font-bold flex items-center gap-2"},ft={class:"whitespace-pre-wrap text-sm text-gray-700 leading-relaxed"},vt={key:0,class:"text-orange-500 text-sm mt-3 flex items-center gap-1 font-medium bg-orange-50 p-2 rounded inline-block"},yt=ie({name:"customer_detail",__name:"[id]",setup(bt){const R=ue(),S=de(),x=R.params.id,e=v(null),U=v([]),I=v("timeline"),k=v(!1),j=v([{label:"ðŸ’¬ è·Ÿè¿›è®°å½•",name:"timeline"}]);Object.keys(Object.assign({"/src/views/commercial_disabled/components/LicenseTab.vue":()=>je(()=>import("./LicenseTab-xpliP0X3.js"),__vite__mapDeps([0,1,2]))})).find(m=>m.includes("/commercial/components/LicenseTab.vue"));const M=v("edit"),E=v(!1),r=v({method:"Wechat",content:"",next_time:null}),z=[{label:"å¾®ä¿¡èŠå¤©",value:"Wechat",icon:"mdi:wechat"},{label:"ç”µè¯æ²Ÿé€š",value:"Phone",icon:"mdi:phone"},{label:"çº¿ä¸‹æ‹œè®¿",value:"Visit",icon:"mdi:walk"},{label:"é‚®ä»¶",value:"Email",icon:"mdi:email"}],B={Wechat:"å¾®ä¿¡",Phone:"ç”µè¯",Visit:"æ‹œè®¿",Email:"é‚®ä»¶"},V={0:{label:"çº¿ç´¢/è¯¢å•",type:"info"},1:{label:"è¯•ç”¨/POC",type:"primary"},2:{label:"æ­£å¼æˆäº¤",type:"success"},3:{label:"æµå¤±/è¿‡æœŸ",type:"warning"},9:{label:"é»‘åå•",type:"danger"}};function h(m){return m?Be(m).format("YYYY-MM-DD HH:mm"):"-"}async function D(){k.value=!0;try{const{data:m}=await Ne(x);m&&(e.value=m,S.setTabLabel(`å®¢æˆ·è¯¦æƒ… - ${m.name}`))}finally{k.value=!1}}async function P(){const{data:m}=await We(x);m&&(U.value=m)}async function O(){if(!r.value.content){L.warning("è¯·å¡«å†™æ²Ÿé€šçºªè¦");return}await Ae({client_id:x,method:r.value.method,content:r.value.content,next_time:r.value.next_time||void 0}),L.success("è®°å½•æ·»åŠ æˆåŠŸ"),r.value.content="",r.value.next_time=null,P(),D()}function N(){M.value="edit",E.value=!0}function W(){D()}return ce(()=>{x&&(D(),P())}),(m,s)=>{const A=_e,g=pe,H=fe,p=ye,Y=ve,f=xe,$=be,G=ge,q=he,C=we,J=Ie,Q=Ue,T=Te,F=Ce,X=Me,Z=De,K=ze,ee=Ve,te=Ye,le=Pe,ae=Ee,se=ke,ne=me;return n(),c("div",$e,[re((n(),_(C,{shadow:"never",class:"w-1/3 min-w-[340px] flex-none overflow-y-auto"},{default:l(()=>[e.value?(n(),c("div",Ge,[a("div",qe,[a("div",Je,[t(A,{size:64,class:"bg-primary text-white text-2xl flex-shrink-0"},{default:l(()=>[u(o(e.value.type===1?"ä¼":e.value.name.charAt(0)),1)]),_:1}),a("div",Qe,[a("h2",{class:"text-xl font-bold m-0 truncate",title:e.value.name},o(e.value.name),9,Xe),a("div",Ze,[e.value.type===0?(n(),_(g,{key:0,type:"info",size:"small"},{default:l(()=>[...s[6]||(s[6]=[u("ä¸ªäºº",-1)])]),_:1})):(n(),_(g,{key:1,type:"primary",size:"small"},{default:l(()=>[...s[7]||(s[7]=[u("ä¼ä¸š",-1)])]),_:1})),V[e.value.status]?(n(),_(g,{key:2,type:V[e.value.status].type,size:"small"},{default:l(()=>[u(o(V[e.value.status].label),1)]),_:1},8,["type"])):y("",!0),t(H,{modelValue:e.value.level,"onUpdate:modelValue":s[0]||(s[0]=d=>e.value.level=d),disabled:"","text-color":"#ff9900","score-template":"{value}",size:"small"},null,8,["modelValue"])])])]),t(Y,{plain:"",type:"primary",size:"small",class:"flex-shrink-0",onClick:N},{icon:l(()=>[t(p,{icon:"mdi:pencil"})]),default:l(()=>[s[8]||(s[8]=u(" ç¼–è¾‘ ",-1))]),_:1})]),t($,{column:1,border:"",size:"small",class:"mb-4"},{default:l(()=>[t(f,{label:"å¾®ä¿¡"},{default:l(()=>[a("div",Ke,[a("span",null,o(e.value.wechat||"-"),1),e.value.wechat?(n(),_(p,{key:0,icon:"mdi:wechat",class:"text-green-500"})):y("",!0)])]),_:1}),t(f,{label:"ç½‘å€"},{default:l(()=>[e.value.website?(n(),c("a",{key:0,href:e.value.website.startsWith("http")?e.value.website:`https://${e.value.website}`,target:"_blank",class:"text-blue-500 flex items-center gap-1 hover:underline"},[u(o(e.value.website)+" ",1),t(p,{icon:"mdi:link-variant"})],8,et)):(n(),c("span",tt,"-"))]),_:1}),t(f,{label:"Telegram"},{default:l(()=>[e.value.telegram?(n(),c("div",lt,[a("span",null,o(e.value.telegram),1),t(p,{icon:"logos:telegram",class:"text-sm"})])):(n(),c("span",at,"-"))]),_:1}),e.value.type===1?(n(),c(b,{key:0},[t(f,{label:"å¯¹æŽ¥äºº"},{default:l(()=>[u(o(e.value.contact_person),1)]),_:1}),t(f,{label:"èŒä½"},{default:l(()=>[u(o(e.value.contact_role||"-"),1)]),_:1}),t(f,{label:"æ‰‹æœº"},{default:l(()=>[u(o(e.value.phone),1)]),_:1})],64)):(n(),c(b,{key:1},[t(f,{label:"æ‰‹æœº"},{default:l(()=>[u(o(e.value.phone||"-"),1)]),_:1}),t(f,{label:"é‚®ç®±"},{default:l(()=>[u(o(e.value.email||"-"),1)]),_:1})],64))]),_:1}),e.value.tech_tags&&e.value.tech_tags.length?(n(),c("div",st,[s[9]||(s[9]=a("div",{class:"text-gray-500 text-xs mb-2"},"æ ‡ç­¾",-1)),a("div",nt,[(n(!0),c(b,null,w(e.value.tech_tags,d=>(n(),_(g,{key:d,size:"small"},{default:l(()=>[u(o(d),1)]),_:2},1024))),128))])])):y("",!0),e.value.type===1?(n(),_(q,{key:1,class:"mt-4"},{default:l(()=>[t(G,{name:"1"},{title:l(()=>[a("div",ot,[t(p,{icon:"carbon:folder"}),s[10]||(s[10]=a("span",null,"è´¢åŠ¡å¼€ç¥¨ä¿¡æ¯",-1))])]),default:l(()=>[a("div",it,[a("p",null,[s[11]||(s[11]=a("span",{class:"text-gray-400"},"ç¨Žå·:",-1)),u(" "+o(e.value.tax_code||"-"),1)]),a("p",null,[s[12]||(s[12]=a("span",{class:"text-gray-400"},"å¼€æˆ·è¡Œ:",-1)),u(" "+o(e.value.bank_name||"-"),1)]),a("p",null,[s[13]||(s[13]=a("span",{class:"text-gray-400"},"è´¦å·:",-1)),u(" "+o(e.value.bank_account||"-"),1)]),a("p",null,[s[14]||(s[14]=a("span",{class:"text-gray-400"},"åœ°å€:",-1)),u(" "+o(e.value.reg_address||"-"),1)])])]),_:1})]),_:1})):y("",!0),a("div",ut,[a("p",null,"åˆ›å»ºæ—¶é—´: "+o(h(e.value.created_at)),1),a("p",null,"æœ€åŽæ›´æ–°: "+o(h(e.value.updated_at)),1),a("p",null,"æœ€åŽæ´»è·ƒ: "+o(h(e.value.last_active||"")),1)])])):y("",!0)]),_:1})),[[ne,k.value]]),t(C,{shadow:"never",class:"flex-1 flex flex-col min-h-0"},{default:l(()=>[t(se,{modelValue:I.value,"onUpdate:modelValue":s[4]||(s[4]=d=>I.value=d),class:"h-full flex flex-col"},{default:l(()=>[(n(!0),c(b,null,w(j.value,d=>(n(),_(ae,{key:d.name,label:d.label,name:d.name,class:"h-full overflow-hidden flex flex-col"},{default:l(()=>[d.name==="timeline"?(n(),c(b,{key:0},[a("div",dt,[t(ee,{"label-position":"top"},{default:l(()=>[t(Z,{gutter:10},{default:l(()=>[t(F,{span:12},{default:l(()=>[t(T,{label:"è·Ÿè¿›æ–¹å¼"},{default:l(()=>[t(Q,{modelValue:r.value.method,"onUpdate:modelValue":s[1]||(s[1]=i=>r.value.method=i),size:"small"},{default:l(()=>[(n(),c(b,null,w(z,i=>t(J,{key:i.value,value:i.value},{default:l(()=>[a("div",ct,[t(p,{icon:i.icon},null,8,["icon"]),u(" "+o(i.label),1)])]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(F,{span:12},{default:l(()=>[t(T,{label:"é¢„çº¦ä¸‹æ¬¡ (å¯é€‰)"},{default:l(()=>[t(X,{modelValue:r.value.next_time,"onUpdate:modelValue":s[2]||(s[2]=i=>r.value.next_time=i),type:"datetime",placeholder:"é€‰æ‹©ä¸‹æ¬¡è·Ÿè¿›æ—¶é—´","value-format":"YYYY-MM-DD HH:mm:ss",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(T,null,{default:l(()=>[t(K,{modelValue:r.value.content,"onUpdate:modelValue":s[3]||(s[3]=i=>r.value.content=i),type:"textarea",rows:3,placeholder:"ä»Šå¤©èŠäº†ä»€ä¹ˆï¼Ÿé‡ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ"},null,8,["modelValue"])]),_:1}),a("div",rt,[t(Y,{type:"primary",onClick:O},{default:l(()=>[...s[15]||(s[15]=[u("å‘å¸ƒè®°å½•",-1)])]),_:1})])]),_:1})]),a("div",mt,[t(le,null,{default:l(()=>[(n(!0),c(b,null,w(U.value,i=>(n(),_(te,{key:i.id,timestamp:h(i.created_at),type:i.method==="Visit"?"primary":"info",placement:"top"},{default:l(()=>[t(C,{shadow:"hover",class:Fe(["!border-l-4",i.method==="Visit"?"!border-l-primary":"!border-l-gray-200"])},{header:l(()=>[a("div",_t,[a("span",pt,[t(p,{icon:z.find(oe=>oe.value===i.method)?.icon||"mdi:message"},null,8,["icon"]),u(" "+o(B[i.method]||i.method),1)])])]),default:l(()=>[a("p",ft,o(i.content),1),i.next_time?(n(),c("p",vt,[t(p,{icon:"carbon:notification"}),a("span",null,"ä¸‹æ¬¡è·Ÿè¿›: "+o(h(i.next_time)),1)])):y("",!0)]),_:2},1032,["class"])]),_:2},1032,["timestamp","type"]))),128))]),_:1})])],64)):d.component&&e.value?(n(),_(Le(d.component),Re({key:1,"client-id":Se(x),"client-name":e.value.name,"client-status":e.value.status},{ref_for:!0},d.props),null,16,["client-id","client-name","client-status"])):y("",!0)]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(He,{visible:E.value,"onUpdate:visible":s[5]||(s[5]=d=>E.value=d),"operate-type":M.value,"row-data":e.value,onSubmitted:W},null,8,["visible","operate-type","row-data"])])}}}),kt=Oe(yt,[["__scopeId","data-v-018206e9"]]);export{kt as default};
