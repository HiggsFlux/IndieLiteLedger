const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LicenseTab-CAUtdChJ.js","assets/index-xTveqTne.js","assets/index-CbcA1A8u.css","assets/license-record-BAeqi8K7.js","assets/license-config-tLAC3KGb.js"])))=>i.map(i=>d[i]);
import{d as ce,a6 as de,a8 as re,r as v,aq as me,N as _e,b as d,o as n,O as pe,f as t,U as fe,c as _,w as l,G as y,e as a,ar as ve,g as u,t as o,R as ye,as as be,E as xe,_ as he,ab as ge,ac as we,ai as b,aj as w,an as ke,ao as Ee,J as Ve,ag as Ce,ah as De,y as Te,ad as Ue,ae as Ie,p as ze,Y as Me,at as Ye,af as Fe,q as Pe,au as je,av as Le,ak as Re,I as Be,aw as Oe,h as Se,ax as Ae,a9 as Ne,a2 as B,a4 as He}from"./index-xTveqTne.js";import{f as We,a as $e,c as qe}from"./client-2bbT_4mG.js";import{_ as Ge}from"./ClientOperateDialog.vue_vue_type_script_setup_true_lang-TQmTxaoW.js";const Je={class:"h-full flex gap-4 p-4 overflow-hidden"},Ke={key:0},Qe={class:"flex items-start justify-between mb-4"},Xe={class:"flex items-center gap-3 flex-1 min-w-0 mr-2"},Ze={class:"min-w-0 flex-1"},et=["title"],tt={class:"flex flex-wrap gap-2 mt-2"},lt={class:"flex items-center gap-1"},at=["href"],st={key:1},nt={key:0,class:"flex items-center gap-1"},ot={key:1},it={key:0,class:"mb-4"},ut={class:"flex flex-wrap gap-2"},ct={class:"flex items-center gap-1 font-bold text-gray-600"},dt={class:"text-xs text-gray-600 space-y-1"},rt={class:"mt-6 pt-4 border-t border-gray-100 text-xs text-gray-400"},mt={class:"p-4 bg-gray-50 rounded mb-4 flex-none"},_t={class:"flex items-center gap-1"},pt={class:"flex justify-end"},ft={class:"flex-1 overflow-y-auto pr-2 pl-4"},vt={class:"flex justify-between items-center"},yt={class:"font-bold flex items-center gap-2"},bt={class:"whitespace-pre-wrap text-sm text-gray-700 leading-relaxed"},xt={key:0,class:"text-orange-500 text-sm mt-3 flex items-center gap-1 font-medium bg-orange-50 p-2 rounded inline-block"},ht=ce({name:"customer_detail",__name:"[id]",setup(gt){const O=de(),S=re(),x=O.params.id,e=v(null),U=v([]),I=v("timeline"),k=v(!1),z=v([{label:"ðŸ’¬ è·Ÿè¿›è®°å½•",name:"timeline"}]),M=Object.assign({"/src/views/commercial/components/LicenseTab.vue":()=>Ae(()=>import("./LicenseTab-CAUtdChJ.js"),__vite__mapDeps([0,1,2,3,4]))}),Y=Object.keys(M).find(r=>r.includes("/commercial/components/LicenseTab.vue"));if(Y){const r=me(M[Y]);z.value.push({label:"ðŸ”‘ æŽˆæƒç®¡ç†",name:"license",component:r})}const F=v("edit"),E=v(!1),m=v({method:"Wechat",content:"",next_time:null}),P=[{label:"å¾®ä¿¡èŠå¤©",value:"Wechat",icon:"mdi:wechat"},{label:"ç”µè¯æ²Ÿé€š",value:"Phone",icon:"mdi:phone"},{label:"çº¿ä¸‹æ‹œè®¿",value:"Visit",icon:"mdi:walk"},{label:"é‚®ä»¶",value:"Email",icon:"mdi:email"}],A={Wechat:"å¾®ä¿¡",Phone:"ç”µè¯",Visit:"æ‹œè®¿",Email:"é‚®ä»¶"},V={0:{label:"çº¿ç´¢/è¯¢å•",type:"info"},1:{label:"è¯•ç”¨/POC",type:"primary"},2:{label:"æ­£å¼æˆäº¤",type:"success"},3:{label:"æµå¤±/è¿‡æœŸ",type:"warning"},9:{label:"é»‘åå•",type:"danger"}};function h(r){return r?Ne(r).format("YYYY-MM-DD HH:mm"):"-"}async function C(){k.value=!0;try{const{data:r}=await We(x);r&&(e.value=r,S.setTabLabel(`å®¢æˆ·è¯¦æƒ… - ${r.name}`))}finally{k.value=!1}}async function j(){const{data:r}=await $e(x);r&&(U.value=r)}async function N(){if(!m.value.content){B.warning("è¯·å¡«å†™æ²Ÿé€šçºªè¦");return}await qe({client_id:x,method:m.value.method,content:m.value.content,next_time:m.value.next_time||void 0}),B.success("è®°å½•æ·»åŠ æˆåŠŸ"),m.value.content="",m.value.next_time=null,j(),C()}function H(){F.value="edit",E.value=!0}function W(){C()}return _e(()=>{x&&(C(),j())}),(r,s)=>{const $=ve,g=ye,q=be,p=he,L=xe,f=we,G=ge,J=Ee,K=ke,D=Ve,Q=Ye,X=Me,T=ze,R=Ie,Z=Fe,ee=Ue,te=Pe,le=Te,ae=Le,se=je,ne=De,oe=Ce,ie=fe;return n(),d("div",Je,[pe((n(),_(D,{shadow:"never",class:"w-1/3 min-w-[340px] flex-none overflow-y-auto"},{default:l(()=>[e.value?(n(),d("div",Ke,[a("div",Qe,[a("div",Xe,[t($,{size:64,class:"bg-primary text-white text-2xl flex-shrink-0"},{default:l(()=>[u(o(e.value.type===1?"ä¼":e.value.name.charAt(0)),1)]),_:1}),a("div",Ze,[a("h2",{class:"text-xl font-bold m-0 truncate",title:e.value.name},o(e.value.name),9,et),a("div",tt,[e.value.type===0?(n(),_(g,{key:0,type:"info",size:"small"},{default:l(()=>[...s[6]||(s[6]=[u("ä¸ªäºº",-1)])]),_:1})):(n(),_(g,{key:1,type:"primary",size:"small"},{default:l(()=>[...s[7]||(s[7]=[u("ä¼ä¸š",-1)])]),_:1})),V[e.value.status]?(n(),_(g,{key:2,type:V[e.value.status].type,size:"small"},{default:l(()=>[u(o(V[e.value.status].label),1)]),_:1},8,["type"])):y("",!0),t(q,{modelValue:e.value.level,"onUpdate:modelValue":s[0]||(s[0]=c=>e.value.level=c),disabled:"","text-color":"#ff9900","score-template":"{value}",size:"small"},null,8,["modelValue"])])])]),t(L,{plain:"",type:"primary",size:"small",class:"flex-shrink-0",onClick:H},{icon:l(()=>[t(p,{icon:"mdi:pencil"})]),default:l(()=>[s[8]||(s[8]=u(" ç¼–è¾‘ ",-1))]),_:1})]),t(G,{column:1,border:"",size:"small",class:"mb-4"},{default:l(()=>[t(f,{label:"å¾®ä¿¡"},{default:l(()=>[a("div",lt,[a("span",null,o(e.value.wechat||"-"),1),e.value.wechat?(n(),_(p,{key:0,icon:"mdi:wechat",class:"text-green-500"})):y("",!0)])]),_:1}),t(f,{label:"ç½‘å€"},{default:l(()=>[e.value.website?(n(),d("a",{key:0,href:e.value.website.startsWith("http")?e.value.website:`https://${e.value.website}`,target:"_blank",class:"text-blue-500 flex items-center gap-1 hover:underline"},[u(o(e.value.website)+" ",1),t(p,{icon:"mdi:link-variant"})],8,at)):(n(),d("span",st,"-"))]),_:1}),t(f,{label:"Telegram"},{default:l(()=>[e.value.telegram?(n(),d("div",nt,[a("span",null,o(e.value.telegram),1),t(p,{icon:"logos:telegram",class:"text-sm"})])):(n(),d("span",ot,"-"))]),_:1}),e.value.type===1?(n(),d(b,{key:0},[t(f,{label:"å¯¹æŽ¥äºº"},{default:l(()=>[u(o(e.value.contact_person),1)]),_:1}),t(f,{label:"èŒä½"},{default:l(()=>[u(o(e.value.contact_role||"-"),1)]),_:1}),t(f,{label:"æ‰‹æœº"},{default:l(()=>[u(o(e.value.phone),1)]),_:1})],64)):(n(),d(b,{key:1},[t(f,{label:"æ‰‹æœº"},{default:l(()=>[u(o(e.value.phone||"-"),1)]),_:1}),t(f,{label:"é‚®ç®±"},{default:l(()=>[u(o(e.value.email||"-"),1)]),_:1})],64))]),_:1}),e.value.tech_tags&&e.value.tech_tags.length?(n(),d("div",it,[s[9]||(s[9]=a("div",{class:"text-gray-500 text-xs mb-2"},"æ ‡ç­¾",-1)),a("div",ut,[(n(!0),d(b,null,w(e.value.tech_tags,c=>(n(),_(g,{key:c,size:"small"},{default:l(()=>[u(o(c),1)]),_:2},1024))),128))])])):y("",!0),e.value.type===1?(n(),_(K,{key:1,class:"mt-4"},{default:l(()=>[t(J,{name:"1"},{title:l(()=>[a("div",ct,[t(p,{icon:"carbon:folder"}),s[10]||(s[10]=a("span",null,"è´¢åŠ¡å¼€ç¥¨ä¿¡æ¯",-1))])]),default:l(()=>[a("div",dt,[a("p",null,[s[11]||(s[11]=a("span",{class:"text-gray-400"},"ç¨Žå·:",-1)),u(" "+o(e.value.tax_code||"-"),1)]),a("p",null,[s[12]||(s[12]=a("span",{class:"text-gray-400"},"å¼€æˆ·è¡Œ:",-1)),u(" "+o(e.value.bank_name||"-"),1)]),a("p",null,[s[13]||(s[13]=a("span",{class:"text-gray-400"},"è´¦å·:",-1)),u(" "+o(e.value.bank_account||"-"),1)]),a("p",null,[s[14]||(s[14]=a("span",{class:"text-gray-400"},"åœ°å€:",-1)),u(" "+o(e.value.reg_address||"-"),1)])])]),_:1})]),_:1})):y("",!0),a("div",rt,[a("p",null,"åˆ›å»ºæ—¶é—´: "+o(h(e.value.created_at)),1),a("p",null,"æœ€åŽæ›´æ–°: "+o(h(e.value.updated_at)),1),a("p",null,"æœ€åŽæ´»è·ƒ: "+o(h(e.value.last_active||"")),1)])])):y("",!0)]),_:1})),[[ie,k.value]]),t(D,{shadow:"never",class:"flex-1 flex flex-col min-h-0"},{default:l(()=>[t(oe,{modelValue:I.value,"onUpdate:modelValue":s[4]||(s[4]=c=>I.value=c),class:"h-full flex flex-col"},{default:l(()=>[(n(!0),d(b,null,w(z.value,c=>(n(),_(ne,{key:c.name,label:c.label,name:c.name,class:"h-full overflow-hidden flex flex-col"},{default:l(()=>[c.name==="timeline"?(n(),d(b,{key:0},[a("div",mt,[t(le,{"label-position":"top"},{default:l(()=>[t(ee,{gutter:10},{default:l(()=>[t(R,{span:12},{default:l(()=>[t(T,{label:"è·Ÿè¿›æ–¹å¼"},{default:l(()=>[t(X,{modelValue:m.value.method,"onUpdate:modelValue":s[1]||(s[1]=i=>m.value.method=i),size:"small"},{default:l(()=>[(n(),d(b,null,w(P,i=>t(Q,{key:i.value,value:i.value},{default:l(()=>[a("div",_t,[t(p,{icon:i.icon},null,8,["icon"]),u(" "+o(i.label),1)])]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(R,{span:12},{default:l(()=>[t(T,{label:"é¢„çº¦ä¸‹æ¬¡ (å¯é€‰)"},{default:l(()=>[t(Z,{modelValue:m.value.next_time,"onUpdate:modelValue":s[2]||(s[2]=i=>m.value.next_time=i),type:"datetime",placeholder:"é€‰æ‹©ä¸‹æ¬¡è·Ÿè¿›æ—¶é—´","value-format":"YYYY-MM-DD HH:mm:ss",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(T,null,{default:l(()=>[t(te,{modelValue:m.value.content,"onUpdate:modelValue":s[3]||(s[3]=i=>m.value.content=i),type:"textarea",rows:3,placeholder:"ä»Šå¤©èŠäº†ä»€ä¹ˆï¼Ÿé‡ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ"},null,8,["modelValue"])]),_:1}),a("div",pt,[t(L,{type:"primary",onClick:N},{default:l(()=>[...s[15]||(s[15]=[u("å‘å¸ƒè®°å½•",-1)])]),_:1})])]),_:1})]),a("div",ft,[t(se,null,{default:l(()=>[(n(!0),d(b,null,w(U.value,i=>(n(),_(ae,{key:i.id,timestamp:h(i.created_at),type:i.method==="Visit"?"primary":"info",placement:"top"},{default:l(()=>[t(D,{shadow:"hover",class:Re(["!border-l-4",i.method==="Visit"?"!border-l-primary":"!border-l-gray-200"])},{header:l(()=>[a("div",vt,[a("span",yt,[t(p,{icon:P.find(ue=>ue.value===i.method)?.icon||"mdi:message"},null,8,["icon"]),u(" "+o(A[i.method]||i.method),1)])])]),default:l(()=>[a("p",bt,o(i.content),1),i.next_time?(n(),d("p",xt,[t(p,{icon:"carbon:notification"}),a("span",null,"ä¸‹æ¬¡è·Ÿè¿›: "+o(h(i.next_time)),1)])):y("",!0)]),_:2},1032,["class"])]),_:2},1032,["timestamp","type"]))),128))]),_:1})])],64)):c.component&&e.value?(n(),_(Be(c.component),Oe({key:1,"client-id":Se(x),"client-name":e.value.name,"client-status":e.value.status},{ref_for:!0},c.props),null,16,["client-id","client-name","client-status"])):y("",!0)]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(Ge,{visible:E.value,"onUpdate:visible":s[5]||(s[5]=c=>E.value=c),"operate-type":F.value,"row-data":e.value,onSubmitted:W},null,8,["visible","operate-type","row-data"])])}}}),Vt=He(ht,[["__scopeId","data-v-018206e9"]]);export{Vt as default};
