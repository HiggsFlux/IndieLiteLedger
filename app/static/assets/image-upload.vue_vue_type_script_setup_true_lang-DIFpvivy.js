import{e as y}from"./order-CWAkhiTI.js";import{d as v,r as x,a as b,b as s,o as l,e as d,t as r,f as i,G as V,aD as w,az as k,w as p,E,g as j,ac as u}from"./index-DLYPaTml.js";const B={class:"flex items-start gap-4"},N={class:"w-32 h-32 border border-gray-200 rounded-lg flex items-center justify-center overflow-hidden bg-gray-50 shrink-0"},U=["src"],C={key:1,class:"text-gray-400 text-sm"},T={class:"flex flex-col gap-2 pt-1"},D={key:0,class:"text-xs text-gray-400 leading-relaxed"},z=v({name:"ImageUpload",__name:"image-upload",props:{modelValue:{},placeholder:{default:"上传图片"},accept:{default:".jpg,.jpeg,.png,.gif,.ico,.svg"},tip:{},emptyText:{default:"暂无图片"}},emits:["update:modelValue"],setup(m,{emit:f}){const c=m,g=f,a=x(!1),o=b({get(){return c.modelValue},set(e){g("update:modelValue",e||"")}});async function _(e){const{file:n}=e;a.value=!0;try{const{data:t}=await y(n);t&&t.url&&(o.value=t.url,u.success("上传成功"))}catch{u.error("上传失败")}finally{a.value=!1}}return(e,n)=>{const t=E,h=k;return l(),s("div",B,[d("div",N,[o.value?(l(),s("img",{key:0,src:o.value,class:"w-full h-full object-contain"},null,8,U)):(l(),s("span",C,r(e.emptyText),1))]),d("div",T,[i(h,{action:"","http-request":_,"show-file-list":!1,disabled:a.value,accept:c.accept},{default:p(()=>[i(t,{type:"primary",loading:a.value},{default:p(()=>[j(r(e.placeholder),1)]),_:1},8,["loading"])]),_:1},8,["disabled","accept"]),e.tip?(l(),s("div",D,r(e.tip),1)):V("",!0),w(e.$slots,"tip")])])}}});export{z as _};
