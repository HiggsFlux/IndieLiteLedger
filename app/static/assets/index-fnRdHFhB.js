import{d as k,au as x,r,af as N,N as S,b as p,o as y,f as o,w as a,O as T,y as B,e as l,t as i,p as C,q as U,ax as I,P,E as j,g as q,J as D,aA as F,aB as M,ac as O,B as L}from"./index-tAfeRux5.js";import{_ as g}from"./image-upload.vue_vue_type_script_setup_true_lang-BcmTQ18k.js";import"./order-Dh73Lvvn.js";const A={class:"h-full overflow-hidden p-4"},G={class:"flex justify-between items-center"},J={class:"font-bold text-lg"},z={class:"flex-1 overflow-auto p-4"},H={class:"mb-6"},K={class:"text-base font-medium mb-4 pb-2 border-b"},Q={class:"text-xs text-gray-400 mt-1"},R={class:"mb-6"},W={class:"text-base font-medium mb-4 pb-2 border-b"},X={class:"text-xs text-gray-400 mt-1"},te=k({name:"system_sys-config",__name:"index",setup(Y){const{t:_}=x(),d=r(!1),f=r(!1);r("basic");const t=N({"system.app_name":"","system.logo":"","system.favicon":"","security.session_timeout":30}),b=r([]);async function u(){d.value=!0;try{const e=await F();e.data&&(b.value=e.data,e.data.forEach(s=>{Object.keys(t).includes(s.config_key)&&(s.config_key==="security.session_timeout"?t[s.config_key]=Number(s.config_value)||30:t[s.config_key]=s.config_value||"")}))}catch(e){console.error(e)}finally{d.value=!1}}async function v(){f.value=!0;try{const e={};Object.keys(t).forEach(c=>{e[c]=String(t[c])}),await M(e),O.success(_("system.config.saveSuccess")),await L().initThemeFromBackend(),u()}catch(e){console.error(e)}finally{f.value=!1}}return S(()=>{u()}),(e,s)=>{const c=j,h=U,m=C,$=I,V=B,E=D,w=P;return y(),p("div",A,[o(E,{shadow:"never",class:"h-full flex flex-col border-none"},{header:a(()=>[l("div",G,[l("span",J,i(e.$t("system.config.title")),1),o(c,{type:"primary",loading:f.value,onClick:v},{default:a(()=>[q(i(e.$t("system.config.save")),1)]),_:1},8,["loading"])])]),default:a(()=>[T((y(),p("div",z,[o(V,{"label-position":"top",class:"max-w-2xl"},{default:a(()=>[l("div",H,[l("h3",K,i(e.$t("system.config.basic.title")),1),o(m,{label:e.$t("system.config.basic.appName"),required:""},{default:a(()=>[o(h,{modelValue:t["system.app_name"],"onUpdate:modelValue":s[0]||(s[0]=n=>t["system.app_name"]=n),placeholder:e.$t("system.config.basic.appNamePlaceholder")},null,8,["modelValue","placeholder"]),l("div",Q,i(e.$t("system.config.basic.appNameTip")),1)]),_:1},8,["label"]),o(m,{label:e.$t("system.config.basic.logo")},{default:a(()=>[o(g,{modelValue:t["system.logo"],"onUpdate:modelValue":s[1]||(s[1]=n=>t["system.logo"]=n),placeholder:e.$t("system.config.basic.logoPlaceholder"),"empty-text":e.$t("system.config.basic.logoEmpty"),tip:e.$t("system.config.basic.logoTip")},null,8,["modelValue","placeholder","empty-text","tip"])]),_:1},8,["label"]),o(m,{label:e.$t("system.config.basic.favicon")},{default:a(()=>[o(g,{modelValue:t["system.favicon"],"onUpdate:modelValue":s[2]||(s[2]=n=>t["system.favicon"]=n),placeholder:e.$t("system.config.basic.faviconPlaceholder"),accept:".ico","empty-text":e.$t("system.config.basic.faviconEmpty"),tip:e.$t("system.config.basic.faviconTip")},null,8,["modelValue","placeholder","empty-text","tip"])]),_:1},8,["label"])]),l("div",R,[l("h3",W,i(e.$t("system.config.security.title")),1),o(m,{label:e.$t("system.config.security.sessionTimeout"),required:""},{default:a(()=>[o($,{modelValue:t["security.session_timeout"],"onUpdate:modelValue":s[3]||(s[3]=n=>t["security.session_timeout"]=n),min:5,max:1440},null,8,["modelValue"]),l("div",X,i(e.$t("system.config.security.sessionTimeoutTip")),1)]),_:1},8,["label"])])]),_:1})])),[[w,d.value]])]),_:1})])}}});export{te as default};
