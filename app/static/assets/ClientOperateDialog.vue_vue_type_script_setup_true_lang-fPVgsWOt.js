import{e as N,u as $}from"./client-7Sf9uVTU.js";import{d as j,a as G,r as k,af as I,$ as e,am as W,c as X,o as p,w as s,f as t,y as z,b as v,G as A,p as H,h as u,a4 as J,an as K,g as c,t as b,q as Q,ag as Y,W as V,X as C,ah as Z,a2 as ee,a3 as le,S as te,E as ae,ao as oe,ac as T}from"./index-DLYPaTml.js";const ne=j({name:"customer_list_modules",__name:"ClientOperateDialog",props:{visible:{type:Boolean},operateType:{},rowData:{}},emits:["update:visible","submitted"],setup(D,{emit:S}){const r=D,w=S,d=G({get:()=>r.visible,set:m=>w("update:visible",m)}),g=k(),f=k(!1),a=I({type:0,name:"",phone:"",wechat:"",status:0,level:1,source:"webTrial",contact_person:"",email:"",website:"",tags:[]}),B={name:[{required:!0,message:e("customer.list.namePlaceholder"),trigger:"blur"}],status:[{required:!0,message:e("customer.list.statusPlaceholder"),trigger:"change"}]},P=[{label:e("customer.list.statusLeads"),value:0},{label:e("customer.list.statusTrial"),value:1},{label:e("customer.list.statusDone"),value:2},{label:e("customer.list.statusLost"),value:3},{label:e("customer.list.statusBlacklist"),value:9}],R=[{label:e("customer.list.sourceOptions.webTrial"),value:"webTrial"},{label:e("customer.list.sourceOptions.community"),value:"community"},{label:e("customer.list.sourceOptions.socialMedia"),value:"socialMedia"},{label:e("customer.list.sourceOptions.ecommerce"),value:"ecommerce"},{label:e("customer.list.sourceOptions.offline"),value:"offline"},{label:e("customer.list.sourceOptions.other"),value:"other"}];W(()=>r.visible,m=>{m&&(r.operateType==="edit"&&r.rowData?Object.assign(a,r.rowData):Object.assign(a,{type:0,name:"",phone:"",wechat:"",status:0,level:1,source:"webTrial",contact_person:"",email:"",website:"",tags:[]}))});async function x(){await g.value?.validate(),f.value=!0;try{r.operateType==="add"?(await N(a),T.success(e("customer.list.addSuccess"))):r.operateType==="edit"&&r.rowData&&(await $(r.rowData.id,a),T.success(e("customer.list.updateSuccess"))),w("submitted"),d.value=!1}finally{f.value=!1}}return(m,o)=>{const y=K,h=J,n=H,i=Q,E=Z,_=Y,O=le,L=ee,M=te,q=z,U=ae,F=oe;return p(),X(F,{modelValue:d.value,"onUpdate:modelValue":o[12]||(o[12]=l=>d.value=l),title:m.operateType==="add"?u(e)("customer.list.addClient"):u(e)("customer.list.editClient"),width:"600px"},{footer:s(()=>[t(U,{onClick:o[11]||(o[11]=l=>d.value=!1)},{default:s(()=>[c(b(u(e)("common.cancel")),1)]),_:1}),t(U,{type:"primary",loading:f.value,onClick:x},{default:s(()=>[c(b(u(e)("common.confirm")),1)]),_:1},8,["loading"])]),default:s(()=>[t(q,{ref_key:"formRef",ref:g,model:a,rules:B,"label-width":"100px"},{default:s(()=>[t(n,{label:u(e)("customer.list.type")},{default:s(()=>[t(h,{modelValue:a.type,"onUpdate:modelValue":o[0]||(o[0]=l=>a.type=l)},{default:s(()=>[t(y,{value:0},{default:s(()=>[c(b(u(e)("customer.list.personal")),1)]),_:1}),t(y,{value:1},{default:s(()=>[c(b(u(e)("customer.list.enterprise")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(n,{label:a.type===1?u(e)("customer.list.companyPlaceholder"):u(e)("customer.list.nicknamePlaceholder"),prop:"name"},{default:s(()=>[t(i,{modelValue:a.name,"onUpdate:modelValue":o[1]||(o[1]=l=>a.name=l)},null,8,["modelValue"])]),_:1},8,["label"]),t(n,{label:u(e)("customer.list.status"),prop:"status"},{default:s(()=>[t(_,{modelValue:a.status,"onUpdate:modelValue":o[2]||(o[2]=l=>a.status=l),class:"w-full"},{default:s(()=>[(p(),v(V,null,C(P,l=>t(E,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(L,{gutter:20},{default:s(()=>[t(O,{span:12},{default:s(()=>[t(n,{label:u(e)("customer.list.phone"),prop:"phone"},{default:s(()=>[t(i,{modelValue:a.phone,"onUpdate:modelValue":o[3]||(o[3]=l=>a.phone=l)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),t(O,{span:12},{default:s(()=>[t(n,{label:u(e)("customer.list.wechat"),prop:"wechat"},{default:s(()=>[t(i,{modelValue:a.wechat,"onUpdate:modelValue":o[4]||(o[4]=l=>a.wechat=l)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),t(n,{label:u(e)("customer.list.email"),prop:"email"},{default:s(()=>[t(i,{modelValue:a.email,"onUpdate:modelValue":o[5]||(o[5]=l=>a.email=l)},null,8,["modelValue"])]),_:1},8,["label"]),a.type===1?(p(),v(V,{key:0},[t(n,{label:u(e)("customer.list.contactPerson"),prop:"contact_person"},{default:s(()=>[t(i,{modelValue:a.contact_person,"onUpdate:modelValue":o[6]||(o[6]=l=>a.contact_person=l)},null,8,["modelValue"])]),_:1},8,["label"]),t(n,{label:u(e)("customer.list.website"),prop:"website"},{default:s(()=>[t(i,{modelValue:a.website,"onUpdate:modelValue":o[7]||(o[7]=l=>a.website=l)},null,8,["modelValue"])]),_:1},8,["label"])],64)):A("",!0),t(n,{label:u(e)("customer.list.clientSource"),prop:"source"},{default:s(()=>[t(_,{modelValue:a.source,"onUpdate:modelValue":o[8]||(o[8]=l=>a.source=l),class:"w-full"},{default:s(()=>[(p(),v(V,null,C(R,l=>t(E,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(n,{label:u(e)("customer.list.intentLevel"),prop:"level"},{default:s(()=>[t(M,{modelValue:a.level,"onUpdate:modelValue":o[9]||(o[9]=l=>a.level=l)},null,8,["modelValue"])]),_:1},8,["label"]),t(n,{label:u(e)("customer.list.tags"),prop:"tags"},{default:s(()=>[t(_,{modelValue:a.tags,"onUpdate:modelValue":o[10]||(o[10]=l=>a.tags=l),multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:u(e)("customer.list.tagsPlaceholder"),class:"w-full"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}});export{ne as _};
