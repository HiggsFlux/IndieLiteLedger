import{r as S,a as y,i as O,j,d as P,$ as o,c as k,o as x,k as W,l as A,b as R,e as m,m as H,n as Z,u as z,w as r,f as l,p as N,q as L,h as n,s as F,v as J,g as E,t as b,E as B,x as I,y as M,z as X,A as Q,B as Y,C as $,D as ee,F as oe,G as le,H as ne,T as te,I as ae,J as se,K as re}from"./index-Cl2Qds7-.js";function ie(c){const s=S(0),u=y(()=>Math.ceil(s.value)),a=y(()=>s.value>0),{pause:t,resume:d}=O(({delta:e})=>{if(s.value<=0){s.value=0,t();return}const h=e/1e3;s.value-=h,s.value<=0&&(s.value=0,t())},{immediate:!1});function _(e=c){s.value=e,d()}function f(){s.value=0,t()}return j(()=>{t()}),{count:u,isCounting:a,start:_,stop:f}}const de=P({name:"ThemeSchemaSwitch",__name:"theme-schema-switch",props:{themeSchema:{},showTooltip:{type:Boolean,default:!0},tooltipPlacement:{default:"bottom"}},emits:["switch"],setup(c,{emit:s}){const u=c,a=s;function t(){a("switch")}const d={light:"material-symbols:sunny",dark:"material-symbols:nightlight-rounded",auto:"material-symbols:hdr-auto"},_=y(()=>d[u.themeSchema]),f=y(()=>u.showTooltip?o("icon.themeSchema"):"");return(e,h)=>{const p=W;return x(),k(p,{icon:_.value,"tooltip-content":f.value,"tooltip-placement":e.tooltipPlacement,onClick:t},null,8,["icon","tooltip-content","tooltip-placement"])}}}),ce={class:"absolute-lt z-1 size-full overflow-hidden"},ue={class:"absolute -right-300px -top-900px lt-sm:-right-100px lt-sm:-top-1170px"},pe={height:"1337",width:"1337"},me={id:"linearGradient-2",x1:"0.79",y1:"0.62",x2:"0.21",y2:"0.86"},fe=["stop-color"],ge=["stop-color"],_e={class:"absolute -bottom-400px -left-200px lt-sm:-bottom-760px lt-sm:-left-100px"},he={height:"896",width:"967.8852157128662"},we={id:"linearGradient-3",x1:"0.5",y1:"0",x2:"0.5",y2:"1"},ve=["stop-color"],ye=["stop-color"],Ce=P({name:"WaveBg",__name:"wave-bg",props:{themeColor:{}},setup(c){const s=c,u=y(()=>A(s.themeColor,200)),a=y(()=>A(s.themeColor,500));return(t,d)=>(x(),R("div",ce,[m("div",ue,[(x(),R("svg",pe,[m("defs",null,[d[0]||(d[0]=m("path",{id:"path-1",opacity:"1","fill-rule":"evenodd",d:"M1337,668.5 C1337,1037.455193874239 1037.455193874239,1337 668.5,1337 C523.6725684305388,1337 337,1236 370.50000000000006,1094 C434.03835568300906,824.6732385973953 6.906089672974592e-14,892.6277623047779 0,668.5000000000001 C0,299.5448061257611 299.5448061257609,1.1368683772161603e-13 668.4999999999999,0 C1037.455193874239,0 1337,299.544806125761 1337,668.5Z"},null,-1)),m("linearGradient",me,[m("stop",{offset:"0","stop-color":u.value,"stop-opacity":"1"},null,8,fe),m("stop",{offset:"1","stop-color":a.value,"stop-opacity":"1"},null,8,ge)])]),d[1]||(d[1]=m("g",{opacity:"1"},[m("use",{"xlink:href":"#path-1",fill:"url(#linearGradient-2)","fill-opacity":"1"})],-1))]))]),m("div",_e,[(x(),R("svg",he,[m("defs",null,[d[2]||(d[2]=m("path",{id:"path-2",opacity:"1","fill-rule":"evenodd",d:"M896,448 C1142.6325445712241,465.5747656464056 695.2579309733121,896 448,896 C200.74206902668806,896 5.684341886080802e-14,695.2579309733121 0,448.0000000000001 C0,200.74206902668806 200.74206902668791,5.684341886080802e-14 447.99999999999994,0 C695.2579309733121,0 475,418 896,448Z"},null,-1)),m("linearGradient",we,[m("stop",{offset:"0","stop-color":a.value,"stop-opacity":"1"},null,8,ve),m("stop",{offset:"1","stop-color":u.value,"stop-opacity":"1"},null,8,ye)])]),d[3]||(d[3]=m("g",{opacity:"1"},[m("use",{"xlink:href":"#path-2",fill:"url(#linearGradient-3)","fill-opacity":"1"})],-1))]))])]))}}),xe=/^[\u4E00-\u9FA5a-zA-Z0-9_-]{4,16}$/,D=/^[1](([3][0-9])|([4][01456789])|([5][012356789])|([6][2567])|([7][0-8])|([8][0-9])|([9][012356789]))[0-9]{8}$/,be=/^\w{6,18}$/,Ve=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,Ee=/^\d{6}$/;function q(){const c={userName:{pattern:xe,message:o("form.userName.invalid"),trigger:"change"},phone:{pattern:D,message:o("form.phone.invalid"),trigger:"change"},pwd:{pattern:be,message:o("form.pwd.invalid"),trigger:"change"},code:{pattern:Ee,message:o("form.code.invalid"),trigger:"change"},email:{pattern:Ve,message:o("form.email.invalid"),trigger:"change"}},s={userName:[a(o("form.userName.required")),c.userName],phone:[a(o("form.phone.required")),c.phone],pwd:[a(o("form.pwd.required")),c.pwd],code:[a(o("form.code.required")),c.code],email:[a(o("form.email.required")),c.email]},u=a(o("form.required"));function a(d){return{required:!0,message:d}}function t(d){return[{required:!0,message:o("form.confirmPwd.required")},{asyncValidator:(f,e)=>e.trim()!==""&&e!==H(d)?Promise.reject(f.message):Promise.resolve(),message:o("form.confirmPwd.invalid"),trigger:"input"}]}return{patternRules:c,formRules:s,defaultRequiredRule:u,createRequiredRule:a,createConfirmPwdRule:t}}function G(){const c=S(null);async function s(){await c.value?.validate()}async function u(){c.value?.resetFields()}return{formRef:c,validate:s,restoreValidation:u}}const Pe={class:"flex-y-center justify-between"},ke=P({name:"login_modules",__name:"pwd-login",setup(c){const s=Z();z();const{formRef:u,validate:a}=G(),t=S({userName:"admin",password:"admin123"}),d=y(()=>{const{formRules:f}=q();return{userName:f.userName,password:f.pwd}});async function _(){await a(),await s.login(t.value.userName,t.value.password)}return(f,e)=>{const h=L,p=N,w=J,i=B,C=F,g=M;return x(),k(g,{ref_key:"formRef",ref:u,model:t.value,rules:d.value,size:"large","show-label":!1,onKeyup:I(_,["enter"])},{default:r(()=>[l(p,{prop:"userName"},{default:r(()=>[l(h,{modelValue:t.value.userName,"onUpdate:modelValue":e[0]||(e[0]=V=>t.value.userName=V),placeholder:n(o)("page.login.common.userNamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1}),l(p,{prop:"password"},{default:r(()=>[l(h,{modelValue:t.value.password,"onUpdate:modelValue":e[1]||(e[1]=V=>t.value.password=V),type:"password","show-password-on":"click",placeholder:n(o)("page.login.common.passwordPlaceholder")},null,8,["modelValue","placeholder"])]),_:1}),l(C,{direction:"vertical",size:24,class:"w-full",fill:""},{default:r(()=>[m("div",Pe,[l(w,null,{default:r(()=>[E(b(n(o)("page.login.pwdLogin.rememberMe")),1)]),_:1})]),l(i,{type:"primary",size:"large",round:"",block:"",loading:n(s).loginLoading,onClick:_},{default:r(()=>[E(b(n(o)("common.confirm")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])}}});function K(){const{loading:c,startLoading:s,endLoading:u}=X(),{count:a,start:t,stop:d,isCounting:_}=ie(10),f=y(()=>{let p=o("page.login.codeLogin.getCode");const w=o("page.login.codeLogin.reGetCode",{time:a.value});return c.value&&(p=""),_.value&&(p=w),p});function e(p){return p.trim()===""?(window.$message?.error?.(o("form.phone.required")),!1):D.test(p)?!0:(window.$message?.error?.(o("form.phone.invalid")),!1)}async function h(p){!e(p)||c.value||(s(),await new Promise(i=>{setTimeout(i,500)}),window.$message?.success?.(o("page.login.codeLogin.sendCodeSuccess")),t(),u())}return{label:f,start:t,stop:d,isCounting:_,loading:c,getCaptcha:h}}const Se={class:"w-full flex-y-center gap-16px"},$e=P({name:"login_modules",__name:"code-login",setup(c){const{toggleLoginModule:s}=z(),{formRef:u,validate:a}=G(),{label:t,isCounting:d,loading:_,getCaptcha:f}=K(),e=S({phone:"",code:""}),h=y(()=>{const{formRules:w}=q();return{phone:w.phone,code:w.code}});async function p(){await a(),window.$message?.success(o("page.login.common.validateSuccess"))}return(w,i)=>{const C=L,g=N,V=B,U=F,T=M;return x(),k(T,{ref_key:"formRef",ref:u,model:e.value,rules:h.value,size:"large","show-label":!1,onKeyup:I(p,["enter"])},{default:r(()=>[l(g,{prop:"phone"},{default:r(()=>[l(C,{modelValue:e.value.phone,"onUpdate:modelValue":i[0]||(i[0]=v=>e.value.phone=v),placeholder:n(o)("page.login.common.phonePlaceholder")},null,8,["modelValue","placeholder"])]),_:1}),l(g,{prop:"code"},{default:r(()=>[m("div",Se,[l(C,{modelValue:e.value.code,"onUpdate:modelValue":i[1]||(i[1]=v=>e.value.code=v),placeholder:n(o)("page.login.common.codePlaceholder")},null,8,["modelValue","placeholder"]),l(V,{size:"large",disabled:n(d),loading:n(_),onClick:i[2]||(i[2]=v=>n(f)(e.value.phone))},{default:r(()=>[E(b(n(t)),1)]),_:1},8,["disabled","loading"])])]),_:1}),l(U,{direction:"vertical",size:18,fill:"",class:"w-full"},{default:r(()=>[l(V,{type:"primary",size:"large",round:"",block:"",onClick:p},{default:r(()=>[E(b(n(o)("common.confirm")),1)]),_:1}),l(V,{size:"large",round:"",block:"",onClick:i[3]||(i[3]=v=>n(s)("pwd-login"))},{default:r(()=>[E(b(n(o)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),Re={class:"w-full flex-y-center gap-16px"},ze=P({name:"login_modules",__name:"register",setup(c){const{toggleLoginModule:s}=z(),{formRef:u,validate:a}=G(),{label:t,isCounting:d,loading:_,getCaptcha:f}=K(),e=S({phone:"",code:"",password:"",confirmPassword:""}),h=y(()=>{const{formRules:w,createConfirmPwdRule:i}=q();return{phone:w.phone,code:w.code,password:w.pwd,confirmPassword:i(e.value.password)}});async function p(){await a(),window.$message?.success(o("page.login.common.validateSuccess"))}return(w,i)=>{const C=L,g=N,V=B,U=F,T=M;return x(),k(T,{ref_key:"formRef",ref:u,model:e.value,rules:h.value,size:"large","show-label":!1,onKeyup:I(p,["enter"])},{default:r(()=>[l(g,{prop:"phone"},{default:r(()=>[l(C,{modelValue:e.value.phone,"onUpdate:modelValue":i[0]||(i[0]=v=>e.value.phone=v),placeholder:n(o)("page.login.common.phonePlaceholder")},null,8,["modelValue","placeholder"])]),_:1}),l(g,{prop:"code"},{default:r(()=>[m("div",Re,[l(C,{modelValue:e.value.code,"onUpdate:modelValue":i[1]||(i[1]=v=>e.value.code=v),placeholder:n(o)("page.login.common.codePlaceholder")},null,8,["modelValue","placeholder"]),l(V,{size:"large",disabled:n(d),loading:n(_),onClick:i[2]||(i[2]=v=>n(f)(e.value.phone))},{default:r(()=>[E(b(n(t)),1)]),_:1},8,["disabled","loading"])])]),_:1}),l(g,{prop:"password"},{default:r(()=>[l(C,{modelValue:e.value.password,"onUpdate:modelValue":i[3]||(i[3]=v=>e.value.password=v),type:"password","show-password-on":"click",placeholder:n(o)("page.login.common.passwordPlaceholder")},null,8,["modelValue","placeholder"])]),_:1}),l(g,{prop:"confirmPassword"},{default:r(()=>[l(C,{modelValue:e.value.confirmPassword,"onUpdate:modelValue":i[4]||(i[4]=v=>e.value.confirmPassword=v),type:"password","show-password-on":"click",placeholder:n(o)("page.login.common.confirmPasswordPlaceholder")},null,8,["modelValue","placeholder"])]),_:1}),l(U,{direction:"vertical",size:18,fill:"",class:"w-full"},{default:r(()=>[l(V,{type:"primary",size:"large",round:"",block:"",onClick:p},{default:r(()=>[E(b(n(o)("common.confirm")),1)]),_:1}),l(V,{size:"large",round:"",onClick:i[5]||(i[5]=v=>n(s)("pwd-login"))},{default:r(()=>[E(b(n(o)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),Ne=P({name:"login_modules",__name:"reset-pwd",setup(c){const{toggleLoginModule:s}=z(),{formRef:u,validate:a}=G(),t=S({phone:"",code:"",password:"",confirmPassword:""}),d=y(()=>{const{formRules:f,createConfirmPwdRule:e}=q();return{phone:f.phone,password:f.pwd,confirmPassword:e(t.value.password)}});async function _(){await a(),window.$message?.success(o("page.login.common.validateSuccess"))}return(f,e)=>{const h=L,p=N,w=B,i=F,C=M;return x(),k(C,{ref_key:"formRef",ref:u,model:t.value,rules:d.value,size:"large","show-label":!1,onKeyup:I(_,["enter"])},{default:r(()=>[l(p,{prop:"phone"},{default:r(()=>[l(h,{modelValue:t.value.phone,"onUpdate:modelValue":e[0]||(e[0]=g=>t.value.phone=g),placeholder:n(o)("page.login.common.phonePlaceholder")},null,8,["modelValue","placeholder"])]),_:1}),l(p,{prop:"code"},{default:r(()=>[l(h,{modelValue:t.value.code,"onUpdate:modelValue":e[1]||(e[1]=g=>t.value.code=g),placeholder:n(o)("page.login.common.codePlaceholder")},null,8,["modelValue","placeholder"])]),_:1}),l(p,{prop:"password"},{default:r(()=>[l(h,{modelValue:t.value.password,"onUpdate:modelValue":e[2]||(e[2]=g=>t.value.password=g),type:"password","show-password-on":"click",placeholder:n(o)("page.login.common.passwordPlaceholder")},null,8,["modelValue","placeholder"])]),_:1}),l(p,{prop:"confirmPassword"},{default:r(()=>[l(h,{modelValue:t.value.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=g=>t.value.confirmPassword=g),type:"password","show-password-on":"click",placeholder:n(o)("page.login.common.confirmPasswordPlaceholder")},null,8,["modelValue","placeholder"])]),_:1}),l(i,{direction:"vertical",fill:"",size:18,class:"w-full"},{default:r(()=>[l(w,{type:"primary",size:"large",round:"",onClick:_},{default:r(()=>[E(b(n(o)("common.confirm")),1)]),_:1}),l(w,{size:"large",round:"",onClick:e[4]||(e[4]=g=>n(s)("pwd-login"))},{default:r(()=>[E(b(n(o)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),Le=P({name:"login_modules",__name:"bind-wechat",setup(c){return(s,u)=>(x(),R("div"))}}),Fe={class:"w-400px lt-sm:w-300px"},Be={class:"flex-y-center justify-between"},Ie={class:"text-28px text-primary font-500 lt-sm:text-22px"},Me={class:"i-flex-col"},qe={class:"pt-24px"},Ge={class:"text-18px text-primary font-medium"},Ue={class:"pt-24px"},Ae=P({name:"login",__name:"index",props:{module:{}},setup(c){const s=c,u=Q(),a=Y(),t={"pwd-login":{label:$["pwd-login"],component:ke},"code-login":{label:$["code-login"],component:$e},register:{label:$.register,component:ze},"reset-pwd":{label:$["reset-pwd"],component:Ne},"bind-wechat":{label:$["bind-wechat"],component:Le}},d=y(()=>t[s.module||"pwd-login"]),_=y(()=>a.darkMode?A(a.themeColor,600):a.themeColor),f=y(()=>{const e="#ffffff",h=a.darkMode?.5:.2;return ee(e,a.themeColor,h)});return(e,h)=>{const p=Ce,w=oe,i=de,C=ne,g=se;return x(),R("div",{class:"relative size-full flex-center overflow-hidden",style:re({backgroundColor:f.value})},[l(p,{"theme-color":_.value},null,8,["theme-color"]),l(g,{class:"relative z-4 w-auto rd-12px"},{default:r(()=>[m("div",Fe,[m("header",Be,[l(w,{class:"text-64px text-primary lt-sm:text-48px"}),m("h3",Ie,b(n(a).appName||n(o)("system.title")),1),m("div",Me,[l(i,{"theme-schema":n(a).themeScheme,"show-tooltip":!1,class:"text-20px lt-sm:text-18px",onSwitch:n(a).toggleThemeScheme},null,8,["theme-schema","onSwitch"]),n(a).header.multilingual.visible?(x(),k(C,{key:0,lang:n(u).locale,"lang-options":n(u).localeOptions,"show-tooltip":!1,onChangeLang:n(u).changeLocale},null,8,["lang","lang-options","onChangeLang"])):le("",!0)])]),m("main",qe,[m("h3",Ge,b(n(o)(d.value.label)),1),m("div",Ue,[l(te,{name:n(a).page.animateMode,mode:"out-in",appear:""},{default:r(()=>[(x(),k(ae(d.value.component)))]),_:1},8,["name"])])])])]),_:1})],4)}}});export{Ae as default};
